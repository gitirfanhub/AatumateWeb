"use strict";(self.webpackChunkcraze_website=self.webpackChunkcraze_website||[]).push([[13],{6013:function(e,r,n){n.r(r),n.d(r,{default:function(){return V}});var t,o,a,i=n(4165),c=n(5861),u=n(9439),l=n(2791),d=n(168),s=n(7691),p=s.ZP.section(t||(t=(0,d.Z)(["\n  padding: 1rem 3rem;\n  min-height: 75vh;\n  .checkout-container {\n    display: grid;\n    grid-template-columns: 3fr 2fr;\n    justify-content: flex-start;\n    align-items: flex-start;\n    gap: 2rem;\n    padding: 1rem;\n    .checkout-address {\n      .heading {\n        font: ",";\n        margin-bottom: 1rem;\n      }\n      .checkout-card {\n        padding: 10px;\n        box-shadow: ",";\n        border-radius: 5px;\n        margin-bottom: 1rem;\n        h2 {\n          font: ",";\n          margin-bottom: 0.3rem;\n        }\n        p {\n          font: ",";\n          margin-bottom: 0.775rem;\n        }\n      }\n      .input {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        gap: 1rem;\n      }\n      .field {\n        min-height: 4rem;\n      }\n      .submit {\n        margin-top: 1rem;\n        text-align: right;\n      }\n    }\n  }\n"])),(function(e){return e.theme.fontAppearance.contentBold}),(function(e){return e.theme.shadow.default}),(function(e){return e.theme.fontAppearance.contentBold}),(function(e){return e.theme.fontAppearance.contentLight})),m=n(903),h=n(4453),f=n(1413),x=n(7453),v=n(4023),b=n(184),k=function(e){var r=e.views,n=e.label,t=e.value,o=e.onChange,a=e.placeholder,i=e.variant,c=e.helperText,u=e.inputFormat,l=(e.minDate,e.maxDate),d=(e.onError,e.error),s=void 0!==d&&d,p=e.defaultCalendarMonth,m=new Date;return(0,b.jsx)(x.M,{views:r,label:n,value:t,onChange:o,inputFormat:u,minDate:m,maxDate:l,defaultCalendarMonth:p,renderInput:function(e){return(0,b.jsx)(v.Z,(0,f.Z)((0,f.Z)({},e),{},{variant:i,helperText:c,fullWidth:!0,error:s,inputProps:(0,f.Z)((0,f.Z)({},e.inputProps),{},{placeholder:a})}))}})},g=n(7107),M=n(7414),S=n(8257),y=s.ZP.div(o||(o=(0,d.Z)(["\n  .MuiFormLabel-root.Mui-focused {\n    color: "," !important;\n  }\n  .MuiInput-root {\n    margin-top: 0.7rem;\n  }\n  .MuiInputBase-root.MuiInput-root::before {\n    border-bottom: 1px solid rgba(0, 0, 0, 0.42);\n  }\n  .MuiFormLabel-root.MuiInputLabel-root {\n    transform: translate(14px, 13px);\n  }\n  .MuiFormHelperText-root {\n    margin-top: 3px;\n    margin-left: 0;\n  }\n  .MuiInputLabel-shrink.MuiInputLabel-outlined {\n    transform: translate(14px, -5px) scale(0.75);\n  }\n\n  .MuiFormLabel-root,\n  .MuiInputBase-root {\n    font: ",";\n    &::placeholder {\n      color: ",";\n    }\n  }\n  .MuiInputBase-input {\n    padding: 5px 0;\n    height: 1.1875em;\n    color: rgba(0, 0, 0, 0.6);\n  }\n  .MuiIconButton-root {\n    padding: 0;\n  }\n  .MuiFormHelperText-root.Mui-error {\n    font: ",";\n    color: ",";\n  }\n  .MuiInputAdornment-positionEnd {\n    padding-right: 12px;\n    color: ",";\n    .MuiSvgIcon-root {\n      font-size: 1rem;\n    }\n  }\n  .MuiFilledInput-root {\n    background-color: #fff !important;\n    border-radius: ",";\n    .MuiInputBase-input {\n      padding: 6px 15px;\n    }\n    &:hover {\n      background-color: #fff !important;\n    }\n  }\n  .MuiFilledInput-input {\n    font: ",';\n  }\n  .MuiFilledInput-underline:before,\n  .MuiFilledInput-underline:after {\n    border-bottom: none !important;\n  }\n  .MuiAutocomplete-inputRoot[class*="MuiFilledInput-root"]\n    .MuiAutocomplete-input {\n    width: 100%;\n    padding: 8px 15px;\n  }\n  .MuiOutlinedInput-notchedOutline {\n    border-color: ',";\n  }\n  .MuiOutlinedInput-input {\n    padding: 12.5px 14px;\n    padding-right: 0;\n  }\n  .MuiInputBase-root-MuiOutlinedInput-root.Mui-error\n    .MuiOutlinedInput-notchedOutline {\n    border-color: #d32f2f !important;\n  }\n"])),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.fontAppearance.contentLight}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.fontAppearance.defaultMedium}),(function(e){return e.theme.colors.red}),(function(e){return e.theme.colors.grey}),(function(e){return"rounded"===e.shape?"0.3rem":"1rem"}),(function(e){return e.theme.fontAppearance.defaultMedium}),(function(e){return e.theme.colors.primary})),j=(0,g.Z)({overrides:{MuiPickersToolbar:{toolbar:{backgroundColor:S.colors.primary}},MuiPickersCalendarHeader:{switchHeader:{color:S.colors.primary,backgroundColor:S.colors.secondary}},MuiPickersDay:{day:{color:S.colors.primary},daySelected:{backgroundColor:S.colors.primary,"&:hover":{backgroundColor:S.colors.primaryLite}},dayDisabled:{color:S.colors.primary},current:{color:S.colors.primary}},MuiButton:{textPrimary:{color:S.colors.primary}},MuiPickersClock:{pin:{backgroundColor:S.colors.primary}},MuiPickersClockPointer:{pointer:{backgroundColor:S.colors.primary},thumb:{backgroundColor:S.colors.secondary,borderColor:S.colors.primary},noPoint:{backgroundColor:S.colors.secondary}}}}),N=function(e){var r=e.children;return(0,b.jsx)(y,{children:(0,b.jsx)(M.Z,{theme:j,children:r})})},C=n(6585),I=n(9303),T=n(5705),P=n(9501),R=n(6555),D=s.ZP.section(a||(a=(0,d.Z)(["\n  .promo-flex {\n    display: flex;\n    justify-content: flex-start;\n    margin-bottom: 1rem;\n    & :nth-child(1) {\n      width: 100%;\n      .MuiInputBase-root {\n        flex: auto;\n      }\n    }\n\n    button {\n      background-color: ",";\n      color: ",";\n      border: none;\n      outline: none;\n      border-radius: 5px;\n      cursor: pointer;\n      padding: 0 2rem;\n    }\n  }\n  .checkout-details {\n    padding: 1rem 2rem;\n    background-color: ",";\n\n    .checkout-bill,\n    .total {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 1rem;\n    }\n    .checkout-bill {\n      font: ",";\n    }\n    .checkout-total {\n      border-top: 1px solid ",";\n      padding-top: 20px;\n    }\n  }\n"])),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.backgroundGrey}),(function(e){return e.theme.fontAppearance.commonSize}),(function(e){return e.theme.colors.tertiary})),F={promoCode:""},Z=function(e){var r,n,t=e.product,o=e.promoAmount,a=e.setPromoAmount,u=e.salePrice,l=e.merchantDiscount,d=(0,R.Ps)(),s=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(r,n){var o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Bike"!==t.vehicleType){e.next=13;break}return e.prev=1,e.next=4,(0,P.Yu)("new-bike-user?code=".concat(r.promoCode));case 4:"Success"===(o=e.sent).message?t.productMerchantBike.currentSalePrice>=o.data[0].minimumOrderValue?(a(o.data[0].discountAmount),n.resetForm(),d(R.pp.SUCCESS,"Promocode Applied Successfully")):d(R.pp.ERROR,"Please Order more than or equal to ".concat(o.data[0].minimumOrderValue," rupees to get promo discount")):d(R.pp.ERROR,o.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d(R.pp.ERROR,e.t0);case 11:e.next=23;break;case 13:return e.prev=13,e.next=16,(0,P.Yu)("new-lmv-user?lmvCode=".concat(r.promoCode));case 16:"Success"===(c=e.sent).message?t.productMerchantLmv.currentSalePrice>=c.data[0].lmvMinimumOrderValue?(a(c.data[0].lmvDiscount),n.resetForm(),d(R.pp.SUCCESS,"Promocode Applied Successfully")):d(R.pp.ERROR,"Please Order more than or equal to ".concat(c.data[0].lmvMinimumOrderValue," rupees to get promo discount")):d(R.pp.ERROR,c.data),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),d(R.pp.ERROR,e.t1);case 23:case"end":return e.stop()}}),e,null,[[1,8],[13,20]])})));return function(r,n){return e.apply(this,arguments)}}();return(0,b.jsxs)(D,{children:[(0,b.jsx)(T.J9,{initialValues:F,enableReinitialize:!0,onSubmit:s,children:function(e){var r=e.values,n=e.handleChange,t=e.handleBlur,o=e.handleSubmit;return(0,b.jsx)("form",{onSubmit:o,children:(0,b.jsxs)("div",{className:"promo-flex",children:[(0,b.jsx)(m.Z,{type:"text",id:"promoCode",name:"promoCode",placeholder:"Enter Your Promocode",label:"Promocode",fullWidth:!0,onChange:n,onBlur:t,value:r.promoCode}),(0,b.jsx)("button",{type:"submit",children:"Apply"})]})})}}),(0,b.jsxs)("div",{className:"checkout-details",children:[(0,b.jsxs)("h6",{className:"checkout-bill",children:["Actual Price: ",(0,b.jsxs)("span",{children:["INR ",null===(r=(0,I.KZ)(t))||void 0===r?void 0:r.toFixed(2)]})]}),(0,b.jsxs)("h6",{className:"checkout-bill",children:["Sale Price: ",(0,b.jsxs)("span",{children:["INR ",null===(n=(0,I.vH)(t))||void 0===n?void 0:n.toFixed(2)]})]}),(0,b.jsxs)("h6",{className:"checkout-bill",children:["Discount:"," ",(0,b.jsxs)("span",{children:["INR"," ",((0,I.KZ)(t)-(0,I.vH)(t)).toFixed(2)]})]}),0===Number(l)?(0,b.jsxs)("h6",{className:"checkout-bill",children:["Aatumate Discount: ",(0,b.jsxs)("span",{children:["INR ",parseFloat(u).toFixed(2)]})]}):null,(0,b.jsxs)("h6",{className:"checkout-bill",children:["Merchant Discount:"," ",(0,b.jsxs)("span",{children:["INR ",parseFloat(l).toFixed(2)]})]}),o?(0,b.jsxs)("h6",{className:"checkout-bill",children:["Promocode Discount:"," ",(0,b.jsxs)("span",{children:["INR ",parseFloat(o).toFixed(2)]})]}):null,(0,b.jsx)("div",{className:"checkout-total",children:(0,b.jsxs)("h5",{className:"total",children:["Total:"," ",(0,b.jsxs)("span",{children:["INR"," ",((0,I.vH)(t)-(0===Number(l)?u:l)-o).toFixed(2)]})]})})]})]})},O=n(6794),w=n(7689),A=n(8007),B=n(6856),_=n(2168),L=n(9471),E={preferredDate:"",pickTimeSlot:"",personalNote:""},H=A.Ry().shape({preferredDate:A.Z_().required("Required"),pickTimeSlot:A.Z_().required("Required")}),q=function(){var e,r,n,t=(0,w.TH)(),o=(0,w.s0)(),a=(0,R.Ps)(),d=t.state,s=d.product,f=d.salePrice,x=d.merchantDiscount,v=(0,O.Q)().customer_vehicle,g=(0,_.i)().deleteFromCart,M=(0,L.h)().parameters,S=(0,l.useState)(E),y=(0,u.Z)(S,2),j=y[0],D=y[1],F=(0,l.useState)(""),A=(0,u.Z)(F,2),q=A[0],V=A[1],z=(0,l.useState)(0),Y=(0,u.Z)(z,2),K=Y[0],U=Y[1],J=(0,l.useState)([]),W=(0,u.Z)(J,2),G=W[0],Q=W[1],$=JSON.parse(localStorage.getItem("user_detail")),X=null===v||void 0===v?void 0:v.find((function(e){return e.isSelected})),ee=function(e){var r=e.split(":");return 60*parseInt(r[0])+parseInt(r[1])},re=function(e){var r=Math.floor(e/60);return e%=60,ne(r,2)+":"+ne(e,2)},ne=function e(r,n){return(r=r.toString()).length<n?e("0"+r,n):r},te=null===(e=M[0])||void 0===e?void 0:e.workshopOpen,oe=null===(r=M[0])||void 0===r?void 0:r.workshopClose,ae=null===(n=M[0])||void 0===n?void 0:n.frequency,ie=ee(oe),ce=function(e,r,n){var t=new Array;for(e=30*Math.ceil(e/30),r=30*Math.ceil(r/30);e<r;){var o=re(e)+" - "+re(e+=n);t.push(o)}return t}(ee(te),ie,ae),ue=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(){var r,n,t,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.Yu)("domain?domainName=Order Mangement");case 2:return r=e.sent,n=r.data,e.next=6,(0,P.Yu)("domainmapping?domainName=".concat(n[0]._id));case 6:t=e.sent,o=t.data,Q(o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){ue()}),[]);var le=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(r,n){var t,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preferredDate=(0,I.Y6)(q),"Bike"!==s.vehicleType){e.next=18;break}return t={customer:$._id,customerVehicle:X._id,merchantType:s.merchantType,vehicleType:s.vehicleType,promoAmount:K,adminAmount:0===K?(0,I.vH)(s)-f:(0,I.vH)(s)-f-K,bikeProductMerchant:s.productMerchantBike._id,issueType:"Known",orderNumber:"".concat(s.customer.customerSeqId).concat((0,I.Fq)((new Date).toISOString())),addOns:s.addOnsbike.map((function(e){return e._id})),totalAmount:(0,I.vH)(s),preferredDate:r.preferredDate,pickTimeSlot:r.pickTimeSlot,merchantId:s.productMerchantBike.merchantId._id,productId:s.productMerchantBike.product._id,currentStatus:G[0]._id,personalNote:r.personalNote},e.prev=3,e.next=6,(0,P.qC)("bike-order",t);case 6:n.resetForm(),D(E),a(R.pp.SUCCESS,"Order Placed Successfully"),g("add-to-cart",s._id),o("/ordersuccess"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),a(R.pp.ERROR,e.t0);case 16:e.next=32;break;case 18:return c={customer:$._id,customerVehicle:X._id,merchantType:s.merchantType,vehicleType:s.vehicleType,promoAmount:K,adminAmount:0===K?(0,I.vH)(s)-(0===x?f:x):(0,I.vH)(s)-(0===x?f:x)-K,lmvProductMerchant:s.productMerchantLmv._id,issueType:"Known",orderNumber:"".concat(s.customer.customerSeqId).concat((0,I.Fq)((new Date).toISOString())),addOns:s.addOns.map((function(e){return e._id})),totalAmount:(0,I.vH)(s),preferredDate:r.preferredDate,pickTimeSlot:r.pickTimeSlot,merchantId:s.productMerchantLmv.merchantId._id,productId:s.productMerchantLmv.product._id,currentStatus:G[0]._id,personalNote:r.personalNote},e.prev=19,e.next=22,(0,P.qC)("lmv-order",c);case 22:n.resetForm(),D(E),a(R.pp.SUCCESS,"Order Placed Successfully"),g("add-to-cart",s._id),o("/ordersuccess"),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(19),a(R.pp.ERROR,e.t1);case 32:case"end":return e.stop()}}),e,null,[[3,13],[19,29]])})));return function(r,n){return e.apply(this,arguments)}}();return(0,b.jsx)(p,{children:(0,b.jsxs)("div",{className:"checkout-container",children:[(0,b.jsxs)("div",{className:"checkout-address",children:[(0,b.jsx)("h3",{className:"heading",children:"Confirmation"}),(0,b.jsxs)("div",{className:"checkout-card",children:[(0,b.jsx)("h2",{children:"Vehicle Detais"}),(0,b.jsxs)("p",{children:[s.customerCar.vehicle.carBrand.brandName,","," ",s.customerCar.vehicle.carModel.carmodelName,","," ",s.customerCar.vehicle.carModel.variant,",",s.customerCar.vehicle.vehicleType.vehicletypeName,s.carNumber]}),(0,b.jsx)("h2",{children:"Vehicle Services"}),(0,b.jsx)("p",{children:s.productMerchantBike?s.productMerchantBike.product.productName:s.productMerchantLmv.product.productName}),(0,b.jsx)("h2",{children:"Selected Garage"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{children:(0,b.jsx)(B.$0r,{})}),s.productMerchantBike?(s.productMerchantBike.merchantId.addressLine1,s.productMerchantBike.merchantId.addressLine1):(s.productMerchantLmv.merchantId.addressLine1,s.productMerchantLmv.merchantId.addressLine1)]})]}),(0,b.jsx)(T.J9,{initialValues:j,validationSchema:H,enableReinitialize:!0,onSubmit:le,children:function(e){var r=e.values,n=e.touched,t=e.errors,o=e.handleChange,a=e.handleBlur,i=e.handleSubmit,c=e.setFieldValue;return(0,b.jsxs)("form",{onSubmit:i,children:[(0,b.jsx)("h3",{className:"heading",children:"Select Your Preferred Date & Time"}),(0,b.jsxs)("div",{className:"input",children:[(0,b.jsx)("div",{className:"field",children:(0,b.jsx)(N,{children:(0,b.jsx)(k,{placeholder:"From Date",value:q,label:"From Date",onChange:function(e){V(e),c("preferredDate",(0,I.p6)(e))},variant:"outlined",inputFormat:"dd/MM/yyyy",helperText:t.preferredDate&&n.preferredDate&&t.preferredDate,error:t.preferredDate&&n.preferredDate})})}),(0,b.jsx)("div",{className:"field",children:(0,b.jsx)(C.Z,{options:ce,noOptionsText:"No Records Found",variant:"outlined",id:"pickTimeSlot",name:"pickTimeSlot",label:"Pick Time Slot",onChange:function(e,r){return c("pickTimeSlot",null!==r?r:E.pickTimeSlot)},onBlur:a,value:r.pickTimeSlot,fullWidth:!0,helperText:t.pickTimeSlot&&n.pickTimeSlot&&t.pickTimeSlot,error:t.pickTimeSlot&&n.pickTimeSlot})})]}),(0,b.jsx)("h3",{className:"heading",children:"Personal Note"}),(0,b.jsx)(m.Z,{variant:"outlined",name:"personalNote",id:"personalNote",label:"Comments",value:r.personalNote,multiline:!0,maxRows:6,onChange:o,onBlur:a}),(0,b.jsx)("div",{className:"submit",children:(0,b.jsx)(h.Z,{type:"submit",size:!0,children:"Place Order"})})]})}})]}),(0,b.jsx)(Z,{product:s,promoAmount:K,setPromoAmount:U,salePrice:f,merchantDiscount:x})]})})},V=q}}]);
//# sourceMappingURL=13.059ea73f.chunk.js.map