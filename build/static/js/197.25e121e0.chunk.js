"use strict";(self.webpackChunkcraze_website=self.webpackChunkcraze_website||[]).push([[197],{8197:(e,r,n)=>{n.r(r),n.d(r,{default:()=>E});var t,o=n(5043),a=n(7528),i=n(2119);const c=i.Ay.section(t||(t=(0,a.A)(["\n  padding: 1rem 3rem;\n  min-height: 75vh;\n  .checkout-container {\n    display: grid;\n    grid-template-columns: 3fr 2fr;\n    justify-content: flex-start;\n    align-items: flex-start;\n    gap: 2rem;\n    padding: 1rem;\n    .checkout-address {\n      .heading {\n        font: ",";\n        margin-bottom: 1rem;\n      }\n      .checkout-card {\n        padding: 10px;\n        box-shadow: ",";\n        border-radius: 5px;\n        margin-bottom: 1rem;\n        h2 {\n          font: ",";\n          margin-bottom: 0.3rem;\n        }\n        p {\n          font: ",";\n          margin-bottom: 0.775rem;\n        }\n      }\n      .input {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        gap: 1rem;\n      }\n      .field {\n        min-height: 4rem;\n      }\n      .submit {\n        margin-top: 1rem;\n        text-align: right;\n      }\n    }\n  }\n"])),e=>{let{theme:r}=e;return r.fontAppearance.contentBold},e=>{let{theme:r}=e;return r.shadow.default},e=>{let{theme:r}=e;return r.fontAppearance.contentBold},e=>{let{theme:r}=e;return r.fontAppearance.contentLight});var l=n(8966),d=n(9145),s=n(9379),u=n(1917),m=n(6850),p=n(579);const h=e=>{let{views:r,label:n,value:t,onChange:o,placeholder:a,variant:i,helperText:c,inputFormat:l,minDate:d,maxDate:h,onError:x,error:b=!1,defaultCalendarMonth:f}=e;const g=new Date;return(0,p.jsx)(u.l,{views:r,label:n,value:t,onChange:o,inputFormat:l,minDate:g,maxDate:h,defaultCalendarMonth:f,renderInput:e=>(0,p.jsx)(m.A,(0,s.A)((0,s.A)({},e),{},{variant:i,helperText:c,fullWidth:!0,error:b,inputProps:(0,s.A)((0,s.A)({},e.inputProps),{},{placeholder:a})}))})};var x,b=n(8279),f=n(9106),g=n(7875);const M=i.Ay.div(x||(x=(0,a.A)(["\n  .MuiFormLabel-root.Mui-focused {\n    color: "," !important;\n  }\n  .MuiInput-root {\n    margin-top: 0.7rem;\n  }\n  .MuiInputBase-root.MuiInput-root::before {\n    border-bottom: 1px solid rgba(0, 0, 0, 0.42);\n  }\n  .MuiFormLabel-root.MuiInputLabel-root {\n    transform: translate(14px, 13px);\n  }\n  .MuiFormHelperText-root {\n    margin-top: 3px;\n    margin-left: 0;\n  }\n  .MuiInputLabel-shrink.MuiInputLabel-outlined {\n    transform: translate(14px, -5px) scale(0.75);\n  }\n\n  .MuiFormLabel-root,\n  .MuiInputBase-root {\n    font: ",";\n    &::placeholder {\n      color: ",";\n    }\n  }\n  .MuiInputBase-input {\n    padding: 5px 0;\n    height: 1.1875em;\n    color: rgba(0, 0, 0, 0.6);\n  }\n  .MuiIconButton-root {\n    padding: 0;\n  }\n  .MuiFormHelperText-root.Mui-error {\n    font: ",";\n    color: ",";\n  }\n  .MuiInputAdornment-positionEnd {\n    padding-right: 12px;\n    color: ",";\n    .MuiSvgIcon-root {\n      font-size: 1rem;\n    }\n  }\n  .MuiFilledInput-root {\n    background-color: #fff !important;\n    border-radius: ",";\n    .MuiInputBase-input {\n      padding: 6px 15px;\n    }\n    &:hover {\n      background-color: #fff !important;\n    }\n  }\n  .MuiFilledInput-input {\n    font: ",';\n  }\n  .MuiFilledInput-underline:before,\n  .MuiFilledInput-underline:after {\n    border-bottom: none !important;\n  }\n  .MuiAutocomplete-inputRoot[class*="MuiFilledInput-root"]\n    .MuiAutocomplete-input {\n    width: 100%;\n    padding: 8px 15px;\n  }\n  .MuiOutlinedInput-notchedOutline {\n    border-color: ',";\n  }\n  .MuiOutlinedInput-input {\n    padding: 12.5px 14px;\n    padding-right: 0;\n  }\n  .MuiInputBase-root-MuiOutlinedInput-root.Mui-error\n    .MuiOutlinedInput-notchedOutline {\n    border-color: #d32f2f !important;\n  }\n"])),e=>{let{theme:r}=e;return r.colors.primary},e=>{let{theme:r}=e;return r.fontAppearance.contentLight},e=>{let{theme:r}=e;return r.colors.primary},e=>{let{theme:r}=e;return r.fontAppearance.defaultMedium},e=>{let{theme:r}=e;return r.colors.red},e=>e.theme.colors.grey,e=>{let{shape:r}=e;return"rounded"===r?"0.3rem":"1rem"},e=>{let{theme:r}=e;return r.fontAppearance.defaultMedium},e=>{let{theme:r}=e;return r.colors.primary}),k=(0,b.A)({overrides:{MuiPickersToolbar:{toolbar:{backgroundColor:g.colors.primary}},MuiPickersCalendarHeader:{switchHeader:{color:g.colors.primary,backgroundColor:g.colors.secondary}},MuiPickersDay:{day:{color:g.colors.primary},daySelected:{backgroundColor:g.colors.primary,"&:hover":{backgroundColor:g.colors.primaryLite}},dayDisabled:{color:g.colors.primary},current:{color:g.colors.primary}},MuiButton:{textPrimary:{color:g.colors.primary}},MuiPickersClock:{pin:{backgroundColor:g.colors.primary}},MuiPickersClockPointer:{pointer:{backgroundColor:g.colors.primary},thumb:{backgroundColor:g.colors.secondary,borderColor:g.colors.primary},noPoint:{backgroundColor:g.colors.secondary}}}}),v=e=>{let{children:r}=e;return(0,p.jsx)(M,{children:(0,p.jsx)(f.A,{theme:k,children:r})})};var y,S=n(7349),j=n(2647),N=n(3516),I=n(8826),C=n(6050);const A=i.Ay.section(y||(y=(0,a.A)(["\n  .promo-flex {\n    display: flex;\n    justify-content: flex-start;\n    margin-bottom: 1rem;\n    & :nth-child(1) {\n      width: 100%;\n      .MuiInputBase-root {\n        flex: auto;\n      }\n    }\n\n    button {\n      background-color: ",";\n      color: ",";\n      border: none;\n      outline: none;\n      border-radius: 5px;\n      cursor: pointer;\n      padding: 0 2rem;\n    }\n  }\n  .checkout-details {\n    padding: 1rem 2rem;\n    background-color: ",";\n\n    .checkout-bill,\n    .total {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 1rem;\n    }\n    .checkout-bill {\n      font: ",";\n    }\n    .checkout-total {\n      border-top: 1px solid ",";\n      padding-top: 20px;\n    }\n  }\n"])),e=>{let{theme:r}=e;return r.colors.primary},e=>{let{theme:r}=e;return r.colors.secondary},e=>{let{theme:r}=e;return r.colors.backgroundGrey},e=>{let{theme:r}=e;return r.fontAppearance.commonSize},e=>{let{theme:r}=e;return r.colors.tertiary}),T={promoCode:""},R=e=>{var r,n;let{product:t,promoAmount:o,setPromoAmount:a,salePrice:i,merchantDiscount:c}=e;const d=(0,C._k)();return(0,p.jsxs)(A,{children:[(0,p.jsx)(N.l1,{initialValues:T,enableReinitialize:!0,onSubmit:async(e,r)=>{if("Bike"===t.vehicleType)try{const n=await(0,I.bQ)("new-bike-user?code=".concat(e.promoCode));"Success"===n.message?t.productMerchantBike.currentSalePrice>=n.data[0].minimumOrderValue?(a(n.data[0].discountAmount),r.resetForm(),d(C.Jx.SUCCESS,"Promocode Applied Successfully")):d(C.Jx.ERROR,"Please Order more than or equal to ".concat(n.data[0].minimumOrderValue," rupees to get promo discount")):d(C.Jx.ERROR,n.data)}catch(n){d(C.Jx.ERROR,n)}else try{const n=await(0,I.bQ)("new-lmv-user?lmvCode=".concat(e.promoCode));"Success"===n.message?t.productMerchantLmv.currentSalePrice>=n.data[0].lmvMinimumOrderValue?(a(n.data[0].lmvDiscount),r.resetForm(),d(C.Jx.SUCCESS,"Promocode Applied Successfully")):d(C.Jx.ERROR,"Please Order more than or equal to ".concat(n.data[0].lmvMinimumOrderValue," rupees to get promo discount")):d(C.Jx.ERROR,n.data)}catch(n){d(C.Jx.ERROR,n)}},children:e=>{const{values:r,handleChange:n,handleBlur:t,handleSubmit:o}=e;return(0,p.jsx)("form",{onSubmit:o,children:(0,p.jsxs)("div",{className:"promo-flex",children:[(0,p.jsx)(l.h,{type:"text",id:"promoCode",name:"promoCode",placeholder:"Enter Your Promocode",label:"Promocode",fullWidth:!0,onChange:n,onBlur:t,value:r.promoCode}),(0,p.jsx)("button",{type:"submit",children:"Apply"})]})})}}),(0,p.jsxs)("div",{className:"checkout-details",children:[(0,p.jsxs)("h6",{className:"checkout-bill",children:["Actual Price: ",(0,p.jsxs)("span",{children:["INR ",null===(r=(0,j.AD)(t))||void 0===r?void 0:r.toFixed(2)]})]}),(0,p.jsxs)("h6",{className:"checkout-bill",children:["Sale Price: ",(0,p.jsxs)("span",{children:["INR ",null===(n=(0,j.bM)(t))||void 0===n?void 0:n.toFixed(2)]})]}),(0,p.jsxs)("h6",{className:"checkout-bill",children:["Discount:"," ",(0,p.jsxs)("span",{children:["INR"," ",((0,j.AD)(t)-(0,j.bM)(t)).toFixed(2)]})]}),0===Number(c)?(0,p.jsxs)("h6",{className:"checkout-bill",children:["Aatumate Discount: ",(0,p.jsxs)("span",{children:["INR ",parseFloat(i).toFixed(2)]})]}):null,(0,p.jsxs)("h6",{className:"checkout-bill",children:["Merchant Discount:"," ",(0,p.jsxs)("span",{children:["INR ",parseFloat(c).toFixed(2)]})]}),o?(0,p.jsxs)("h6",{className:"checkout-bill",children:["Promocode Discount:"," ",(0,p.jsxs)("span",{children:["INR ",parseFloat(o).toFixed(2)]})]}):null,(0,p.jsx)("div",{className:"checkout-total",children:(0,p.jsxs)("h5",{className:"total",children:["Total:"," ",(0,p.jsxs)("span",{children:["INR"," ",((0,j.bM)(t)-(0===Number(c)?i:c)-o).toFixed(2)]})]})})]})]})};var D=n(5752),P=n(3216),O=n(899),F=n(7149),w=n(8635),B=n(4392);const _={preferredDate:"",pickTimeSlot:"",personalNote:""},L=O.Ik().shape({preferredDate:O.Yj().required("Required"),pickTimeSlot:O.Yj().required("Required")}),E=()=>{var e,r,n;const t=(0,P.zy)(),a=(0,P.Zp)(),i=(0,C._k)(),{product:s,salePrice:u,merchantDiscount:m}=t.state,{customer_vehicle:x}=(0,D.R)(),{deleteFromCart:b}=(0,w.B)(),{parameters:f}=(0,B.W)(),[g,M]=(0,o.useState)(_),[k,y]=(0,o.useState)(""),[A,T]=(0,o.useState)(0),[O,E]=(0,o.useState)([]),J=JSON.parse(localStorage.getItem("user_detail")),V=null===x||void 0===x?void 0:x.find(e=>e.isSelected);let q=e=>{let r=e.split(":");return 60*parseInt(r[0])+parseInt(r[1])},z=e=>{let r=Math.floor(e/60);return e%=60,Y(r,2)+":"+Y(e,2)},Y=(e,r)=>(e=e.toString()).length<r?Y("0"+e,r):e,H=null===(e=f[0])||void 0===e?void 0:e.workshopOpen,Q=null===(r=f[0])||void 0===r?void 0:r.workshopClose,U=null===(n=f[0])||void 0===n?void 0:n.frequency,W=q(Q),G=((e,r,n)=>{let t=new Array;for(e=30*Math.ceil(e/30),r=30*Math.ceil(r/30);e<r;){let r=z(e)+" - "+z(e+=n);t.push(r)}return t})(q(H),W,U);(0,o.useEffect)(()=>{(async()=>{const{data:e}=await(0,I.bQ)("domain?domainName=Order Mangement"),{data:r}=await(0,I.bQ)("domainmapping?domainName=".concat(e[0]._id));E(r)})()},[]);return(0,p.jsx)(c,{children:(0,p.jsxs)("div",{className:"checkout-container",children:[(0,p.jsxs)("div",{className:"checkout-address",children:[(0,p.jsx)("h3",{className:"heading",children:"Confirmation"}),(0,p.jsxs)("div",{className:"checkout-card",children:[(0,p.jsx)("h2",{children:"Vehicle Detais"}),(0,p.jsxs)("p",{children:[s.customerCar.vehicle.carBrand.brandName,","," ",s.customerCar.vehicle.carModel.carmodelName,","," ",s.customerCar.vehicle.carModel.variant,",",s.customerCar.vehicle.vehicleType.vehicletypeName,s.carNumber]}),(0,p.jsx)("h2",{children:"Vehicle Services"}),(0,p.jsx)("p",{children:s.productMerchantBike?s.productMerchantBike.product.productName:s.productMerchantLmv.product.productName}),(0,p.jsx)("h2",{children:"Selected Garage"}),(0,p.jsxs)("p",{children:[(0,p.jsx)("span",{children:(0,p.jsx)(F.gwi,{})}),s.productMerchantBike?(s.productMerchantBike.merchantId.addressLine1,s.productMerchantBike.merchantId.addressLine1):(s.productMerchantLmv.merchantId.addressLine1,s.productMerchantLmv.merchantId.addressLine1)]})]}),(0,p.jsx)(N.l1,{initialValues:g,validationSchema:L,enableReinitialize:!0,onSubmit:async(e,r)=>{if(e.preferredDate=(0,j._u)(k),"Bike"===s.vehicleType){const t={customer:J._id,customerVehicle:V._id,merchantType:s.merchantType,vehicleType:s.vehicleType,promoAmount:A,adminAmount:0===A?(0,j.bM)(s)-u:(0,j.bM)(s)-u-A,bikeProductMerchant:s.productMerchantBike._id,issueType:"Known",orderNumber:"".concat(s.customer.customerSeqId).concat((0,j.tn)((new Date).toISOString())),addOns:s.addOnsbike.map(e=>e._id),totalAmount:(0,j.bM)(s),preferredDate:e.preferredDate,pickTimeSlot:e.pickTimeSlot,merchantId:s.productMerchantBike.merchantId._id,productId:s.productMerchantBike.product._id,currentStatus:O[0]._id,personalNote:e.personalNote};try{await(0,I.LS)("bike-order",t),r.resetForm(),M(_),i(C.Jx.SUCCESS,"Order Placed Successfully"),b("add-to-cart",s._id),a("/ordersuccess")}catch(n){i(C.Jx.ERROR,n)}}else{const t={customer:J._id,customerVehicle:V._id,merchantType:s.merchantType,vehicleType:s.vehicleType,promoAmount:A,adminAmount:0===A?(0,j.bM)(s)-(0===m?u:m):(0,j.bM)(s)-(0===m?u:m)-A,lmvProductMerchant:s.productMerchantLmv._id,issueType:"Known",orderNumber:"".concat(s.customer.customerSeqId).concat((0,j.tn)((new Date).toISOString())),addOns:s.addOns.map(e=>e._id),totalAmount:(0,j.bM)(s),preferredDate:e.preferredDate,pickTimeSlot:e.pickTimeSlot,merchantId:s.productMerchantLmv.merchantId._id,productId:s.productMerchantLmv.product._id,currentStatus:O[0]._id,personalNote:e.personalNote};try{await(0,I.LS)("lmv-order",t),r.resetForm(),M(_),i(C.Jx.SUCCESS,"Order Placed Successfully"),b("add-to-cart",s._id),a("/ordersuccess")}catch(n){i(C.Jx.ERROR,n)}}},children:e=>{const{values:r,touched:n,errors:t,handleChange:o,handleBlur:a,handleSubmit:i,setFieldValue:c}=e;return(0,p.jsxs)("form",{onSubmit:i,children:[(0,p.jsx)("h3",{className:"heading",children:"Select Your Preferred Date & Time"}),(0,p.jsxs)("div",{className:"input",children:[(0,p.jsx)("div",{className:"field",children:(0,p.jsx)(v,{children:(0,p.jsx)(h,{placeholder:"From Date",value:k,label:"From Date",onChange:e=>{y(e),c("preferredDate",(0,j.Yq)(e))},variant:"outlined",inputFormat:"dd/MM/yyyy",helperText:t.preferredDate&&n.preferredDate&&t.preferredDate,error:t.preferredDate&&n.preferredDate})})}),(0,p.jsx)("div",{className:"field",children:(0,p.jsx)(S.A,{options:G,noOptionsText:"No Records Found",variant:"outlined",id:"pickTimeSlot",name:"pickTimeSlot",label:"Pick Time Slot",onChange:(e,r)=>c("pickTimeSlot",null!==r?r:_.pickTimeSlot),onBlur:a,value:r.pickTimeSlot,fullWidth:!0,helperText:t.pickTimeSlot&&n.pickTimeSlot&&t.pickTimeSlot,error:t.pickTimeSlot&&n.pickTimeSlot})})]}),(0,p.jsx)("h3",{className:"heading",children:"Personal Note"}),(0,p.jsx)(l.h,{variant:"outlined",name:"personalNote",id:"personalNote",label:"Comments",value:r.personalNote,multiline:!0,maxRows:6,onChange:o,onBlur:a}),(0,p.jsx)("div",{className:"submit",children:(0,p.jsx)(d.A,{type:"submit",size:!0,children:"Place Order"})})]})}})]}),(0,p.jsx)(R,{product:s,promoAmount:A,setPromoAmount:T,salePrice:u,merchantDiscount:m})]})})}}}]);
//# sourceMappingURL=197.25e121e0.chunk.js.map